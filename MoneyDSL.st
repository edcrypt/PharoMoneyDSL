Object subclass: #Denomination	instanceVariableNames: 'value'	classVariableNames: ''	poolDictionaries: ''	category: 'Money'!!Denomination commentStamp: 'EduardoPadoan 11/16/2017 22:17' prior: 0!I represent some coin or banknote.!!Denomination methodsFor: 'as yet unclassified' stamp: 'EduardoPadoan 11/18/2017 19:03'!adaptToNumber: anInteger andSend: aString 	^ self perform: aString with: anInteger! !!Denomination methodsFor: 'copying' stamp: 'EduardoPadoan 11/18/2017 19:04'!* anInteger	^ DenominationHandler with: self times: anInteger  ! !!Denomination methodsFor: 'copying' stamp: 'EduardoPadoan 11/18/2017 19:16'!copy	^ self class withValue: value! !!Denomination methodsFor: 'printing' stamp: 'EduardoPadoan 11/18/2017 19:35'!printOn: aStream	aStream nextPutAll: value asString.	value < 1		ifTrue: [ aStream nextPutAll: ' cents' ]		ifFalse: [ aStream nextPutAll: ' dolars' ]! !!Denomination methodsFor: 'accessing' stamp: 'EduardoPadoan 11/19/2017 00:10'!value	^ value! !!Denomination methodsFor: 'accessing' stamp: 'EduardoPadoan 11/17/2017 23:58'!value: aFloat	value := aFloat! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Denomination class	instanceVariableNames: ''!!Denomination class methodsFor: 'instance creation' stamp: 'EduardoPadoan 11/18/2017 19:32'!withValue: anInteger	| new | 	new := self new.	new value: anInteger.	^ new! !Object subclass: #DenominationHandler	instanceVariableNames: 'bills'	classVariableNames: ''	poolDictionaries: ''	category: 'Money'!!DenominationHandler commentStamp: 'EduardoPadoan 11/16/2017 22:18' prior: 0!I represent a collection of banknotes.!!DenominationHandler methodsFor: 'initialization' stamp: 'EduardoPadoan 11/19/2017 00:20'!initialize	bills isNil ifTrue: [ bills := Dictionary new ]! !!DenominationHandler methodsFor: 'converting' stamp: 'EduardoPadoan 11/19/2017 16:20'!asAssociation	^ bills associations at: 1! !!DenominationHandler methodsFor: 'copying' stamp: 'EduardoPadoan 11/19/2017 16:18'!, other	bills add: other asAssociation! !!DenominationHandler methodsFor: 'accessing' stamp: 'EduardoPadoan 11/19/2017 16:16'!totalBills	^ bills values reduce: [ :a :b | a + b ]! !!DenominationHandler methodsFor: 'action' stamp: 'EduardoPadoan 11/18/2017 19:35'!bills	^ bills! !!DenominationHandler methodsFor: 'action' stamp: 'EduardoPadoan 11/18/2017 19:08'!bills: anArray	bills := anArray! !!DenominationHandler methodsFor: 'action' stamp: 'EduardoPadoan 11/19/2017 00:17'!add: anAssociation	bills add: anAssociation ! !!DenominationHandler methodsFor: 'iterating' stamp: 'EduardoPadoan 11/19/2017 00:12'!quantitiesAndDenominationsDo: aBlockClosure 	^ bills keysAndValuesDo: aBlockClosure ! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!DenominationHandler class	instanceVariableNames: ''!!DenominationHandler class methodsFor: 'instance creation' stamp: 'EduardoPadoan 11/18/2017 23:45'!with: aDenomination times: anInteger	^ self new: {aDenomination -> anInteger} asDictionary.! !!DenominationHandler class methodsFor: 'instance creation' stamp: 'EduardoPadoan 11/19/2017 00:23'!new: aDict	| new |	new := self new bills: aDict .	^ new! !TestCase subclass: #DenominationHandlerTest	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Money'!TestCase subclass: #DenominationTest	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Money'!'From Pharo7.0alpha of 6 October 2017 [Build information: Pharo-7.0+alpha.build.172.sha.d13eed2f80fe19f29fd85ede8c4809d6a6986d4f (32 Bit)] on 19 November 2017 at 4:29:06.545591 pm'!!FloatTest methodsFor: '*Money' stamp: 'EduardoPadoan 11/19/2017 16:28'!testChangeForWithDenominations	self assert: (10.00 changeFor: 50 withDenominations: 10 * 10 dolars) totalBills equals: 4.	self assert: (10.50 changeFor: 50 withDenominations: 10 * 10 dolars, (2 * 50 cents)) totalBills equals: 5.! !'From Pharo7.0alpha of 6 October 2017 [Build information: Pharo-7.0+alpha.build.172.sha.d13eed2f80fe19f29fd85ede8c4809d6a6986d4f (32 Bit)] on 19 November 2017 at 4:29:06.545971 pm'!!Float methodsFor: '*Money' stamp: 'EduardoPadoan 11/19/2017 16:07'!changeFor: anAmount withDenominations: aDenominationHandler	| rest result |	rest := anAmount - self value.	result := DenominationHandler new.	aDenominationHandler		quantitiesAndDenominationsDo: [ :denomination :quantity | 			| billsNeeded billsUsed |			rest > 0 ifTrue: [ 				billsNeeded := rest // denomination value.				billsUsed := billsNeeded min: quantity.				rest := rest - (billsUsed * denomination value).				result add: denomination -> billsUsed ] 			ifFalse: [ ^ result ] ].		^ result! !'From Pharo7.0alpha of 6 October 2017 [Build information: Pharo-7.0+alpha.build.172.sha.d13eed2f80fe19f29fd85ede8c4809d6a6986d4f (32 Bit)] on 19 November 2017 at 4:29:06.54614 pm'!!Integer methodsFor: '*Money' stamp: 'EduardoPadoan 11/18/2017 23:43'!cents	^ Denomination withValue: (self / 100) asFloat ! !'From Pharo7.0alpha of 6 October 2017 [Build information: Pharo-7.0+alpha.build.172.sha.d13eed2f80fe19f29fd85ede8c4809d6a6986d4f (32 Bit)] on 19 November 2017 at 4:29:06.546291 pm'!!Integer methodsFor: '*Money' stamp: 'EduardoPadoan 11/18/2017 23:43'!dolars	^ Denomination withValue: self asFloat! !